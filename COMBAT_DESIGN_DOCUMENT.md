# Combat System Design Document

## Overview

Eryndor's combat system emphasizes tactical decision-making, skill expression, and meaningful progression. The design balances accessibility for new players with mastery potential for experienced players, creating engaging gameplay that remains satisfying during extended play sessions.

## Core Combat Philosophy

### Design Pillars

- **Tactical Depth**: Combat rewards planning, resource management, and situational awareness
- **Skill Expression**: Player skill matters as much as character statistics
- **Meaningful Choices**: Build diversity and counter-play create strategic depth
- **Grind Satisfaction**: Varied encounters and clear progression maintain engagement

### Player Agency

Combat systems prioritize player choice and skill over random chance. Success depends on understanding enemy patterns, managing resources effectively, and making tactical decisions under pressure.

## Target Selection System

### Primary Targeting Methods

**Tab Targeting**
- Cycle through nearby enemies with Tab key
- Priority logic: nearest hostile, lowest health, player-marked targets
- Visual indicators show selected target with highlighting and UI elements
- Maximum range limits prevent targeting distant enemies

**Click-to-Target**
- Mouse click selects enemies directly
- Cursor changes when hovering over valid targets
- Requires line of sight for target acquisition
- Integration with camera system for 3D targeting accuracy

**Area Targeting**
- Ground-targeted abilities use reticle system
- Range indicators show ability reach before casting
- Obstruction detection prevents targeting through walls
- Preview damage radius for area effects

### Target Information Display

- Health and resource bars above selected targets
- Status effect icons with duration timers
- Threat level indicators for enemy danger assessment
- Distance measurements for range-dependent abilities

## Auto-Attack System

### Weapon-Specific Timing

Combat uses weapon-based auto-attack intervals creating distinct combat rhythms:

- **Fast Weapons** (Daggers): 1.2 second intervals, lower damage per hit
- **Medium Weapons** (Swords, Axes): 1.8 second intervals, balanced damage
- **Slow Weapons** (Two-handed, Staves): 2.5 second intervals, high damage per hit

### Attack Mechanics

**Damage Calculation**
- Base weapon damage modified by character skill levels
- Critical hit chance based on weapon type and character statistics
- Damage type effectiveness against target armor and resistances
- Random variance (Â±10%) prevents predictable damage patterns

**Animation Integration**
- Auto-attacks trigger weapon-appropriate animations
- Hit detection synced with animation frames
- Recovery periods prevent animation canceling exploits
- Smooth transitions between auto-attack and ability animations

**Resource Integration**
- Auto-attacks generate small amounts of class-specific resources
- Mana/stamina costs for enhanced auto-attacks with certain builds
- Combo point generation for classes with sequential ability systems

## Ability System Architecture

### Hotbar Framework

**Ability Slots**
- 12 active ability slots arranged in 3 rows of 4
- Keybind system supports 1-0, Shift+1-0, Ctrl+1-0 combinations
- Drag-and-drop interface for ability arrangement
- Loadout-specific ability configurations

**Resource Types**
- **Mana**: Magic-based abilities, regenerates slowly, large pool
- **Stamina**: Physical abilities, regenerates quickly, medium pool  
- **Focus**: Utility abilities, regenerates moderately, small pool
- **Combo Points**: Generated by specific abilities, consumed for powerful effects

### Cooldown System

**Individual Cooldowns**
- Each ability has independent cooldown timer
- Visual indicators show remaining time with circular progress
- Global cooldown (1.5 seconds) prevents ability spam
- Cooldown reduction through equipment and skill progression

**Resource Management**
- Strategic resource spending prevents endless ability use
- Resource regeneration rates vary by activity (combat vs rest)
- Emergency resource items provide tactical options
- Resource efficiency improves with relevant skill levels

### Ability Categories

**Damage Abilities**
- Direct damage with immediate effect
- Damage over time effects with duration tracking
- Area of effect abilities with radius targeting
- Conditional damage based on enemy state

**Control Abilities** 
- Stuns, slows, and movement restrictions
- Knockback and positioning effects
- Silence effects preventing enemy ability use
- Fear effects causing AI behavior changes

**Support Abilities**
- Healing over time and instant restoration
- Damage shields and temporary hit points
- Stat buffs with duration and stacking rules
- Utility effects like invisibility and movement speed

**Reactive Abilities**
- Block abilities reducing incoming damage
- Dodge abilities providing temporary invulnerability
- Counter-attacks triggered by enemy actions
- Interrupt abilities stopping enemy channeled effects

## Damage System

### Damage Types and Calculations

**Physical Damage Types**
- **Slashing**: Effective against light armor, reduced by heavy armor
- **Piercing**: Bypasses armor partially, consistent damage
- **Bludgeoning**: High damage against heavy armor, reduced by shields

**Elemental Damage Types**
- **Fire**: Damage over time effects, spreads to nearby enemies
- **Ice**: Slowing effects, chance to freeze targets
- **Lightning**: Chain damage, stunning effects on critical hits

**Mystical Damage Types**
- **Shadow**: Reduced healing effectiveness on targets
- **Nature**: Poison effects, bonus damage against constructs
- **Arcane**: Pure magical damage, ignores physical resistances

**Special Damage Types**
- **Healing**: Negative damage restoring hit points
- **Psychic**: Mental effects, bypasses physical defenses
- **Holy**: Bonus damage against undead enemies
- **Necrotic**: Life drain effects, healing reduction

### Resistance and Vulnerability System

**Armor Classes**
- **Heavy Armor**: High physical resistance, low elemental resistance
- **Medium Armor**: Balanced resistances, moderate protection
- **Light Armor**: Low physical resistance, higher elemental resistance

**Dynamic Resistances**
- Environmental effects modify resistances temporarily
- Spell effects can alter damage type effectiveness
- Equipment provides specific resistance bonuses
- Skill progression improves resistance values

## Status Effect System

### Effect Categories

**Buffs (Positive Effects)**
- Stat improvements with visible duration timers
- Damage shields absorbing incoming attacks
- Regeneration effects restoring resources over time
- Movement and utility enhancements

**Debuffs (Negative Effects)**
- Stat penalties reducing effectiveness
- Damage over time effects with tick intervals
- Movement restrictions and speed reductions
- Resource drain effects

**Crowd Control Effects**
- Stuns preventing all actions
- Silences preventing ability use
- Roots preventing movement
- Fears causing uncontrolled movement

### Effect Mechanics

**Stacking Rules**
- Same effects refresh duration rather than stacking intensity
- Different sources of same effect type stack additively
- Maximum stack limits prevent excessive accumulation
- Diminishing returns on consecutive control effects

**Dispel System**
- Magic dispel removes magical effects
- Cleanse abilities remove debuffs specifically  
- Self-dispel abilities provide counterplay options
- Immunity effects prevent specific status types

## Engaging Combat Mechanics

### Combo System

**Ability Chains**
- Certain abilities enable enhanced versions of follow-up skills
- Combo windows (3-5 seconds) require timing precision
- Visual indicators show available combo opportunities
- Bonus effects reward successful combo execution

**Resource Synergy**
- Abilities generate or consume multiple resource types
- Efficient resource management enables sustained combat
- Burst phases consume resources for high damage
- Recovery phases focus on resource regeneration

### Positioning Mechanics

**Range Considerations**
- Melee abilities require close proximity
- Ranged abilities have minimum and maximum distances
- Line of sight requirements for targeted abilities
- Elevation bonuses for ranged attacks from higher ground

**Environmental Interactions**
- Cover reduces damage from ranged attacks
- Destructible objects provide temporary barriers
- Hazardous terrain affects movement and abilities
- Interactive elements create tactical opportunities

### Dynamic Difficulty

**Adaptive Challenge**
- Enemy AI adapts to player behavior patterns
- Encounter difficulty scales with player performance
- Reward scaling matches challenge level
- Skill-based matchmaking for group content

**Player Skill Recognition**
- Combat performance metrics track improvement
- Advanced techniques unlock additional options
- Mastery rewards provide long-term goals
- Tutorial integration teaches complex mechanics gradually

## Combat Flow and Pacing

### Engagement Phases

**Initiation Phase**
- Target acquisition and positioning
- Resource preparation and buff application
- Opening ability selection based on enemy type
- Tactical assessment of encounter parameters

**Active Combat Phase**
- Resource management and ability rotation
- Positional adjustments based on enemy attacks
- Status effect monitoring and response
- Damage optimization through timing and selection

**Resolution Phase**
- Finishing abilities and resource conservation
- Loot collection and progression feedback
- Health and resource recovery
- Preparation for subsequent encounters

### Combat Variety

**Enemy Design Diversity**
- Different enemy types require different strategies
- Elite enemies with unique mechanics and abilities
- Boss encounters with multiple phases and mechanics
- Environmental enemies with terrain-based abilities

**Encounter Scaling**
- Solo encounters balance challenge with progression
- Group encounters require coordination and role specialization
- Dynamic spawning prevents predictable grinding patterns
- Rare encounters provide exceptional rewards and challenges

## Resource Management

### Resource Types and Functions

**Mana (Magic Users)**
- Large pool with slow regeneration
- High-cost abilities with powerful effects
- Mana efficiency improves with skill progression
- Mana potions provide tactical resource restoration

**Stamina (Physical Combatants)**
- Medium pool with moderate regeneration
- Physical abilities and movement consume stamina
- Sprint and dodge abilities require stamina management
- Armor weight affects stamina regeneration rates

**Focus (Utility Specialists)**
- Small pool with fast regeneration
- Utility and support abilities consume focus
- Concentration abilities require sustained focus
- Mental effects can disrupt focus regeneration

**Combo Points (Advanced Combatants)**
- Generated by builder abilities, consumed by finishers
- Maximum 5 combo points with varying generation rates
- Finisher effectiveness scales with combo point consumption
- Combo point decay prevents indefinite accumulation

### Strategic Resource Usage

**Burst vs Sustain**
- High-cost abilities for immediate impact
- Efficient abilities for sustained encounters
- Resource conservation during exploration
- Emergency resource items for critical situations

**Group Resource Coordination**
- Resource sharing abilities for team support
- Complementary resource types encourage group diversity
- Resource efficiency bonuses for coordinated teams
- Leadership abilities affecting group resource management

## Visual and Audio Feedback

### Combat Visual Systems

**Damage Display**
- Floating damage numbers with color coding by damage type
- Critical hits display with enhanced effects and sound
- Healing numbers in distinct colors and animations
- Status effect icons with clear duration indicators

**Effect Visualization**
- Particle systems for magical abilities and impacts
- Screen shake and camera effects for powerful attacks
- Color-coded ability telegraphs warn of incoming attacks
- Environmental effects show area damage and hazards

**Animation Integration**
- Smooth transitions between combat states
- Weapon-specific attack animations with proper timing
- Character reactions to damage and status effects
- Victory poses and defeat animations for combat resolution

### Audio Design

**3D Positional Audio**
- Combat sounds positioned accurately in 3D space
- Distance attenuation for realistic audio experience
- Environmental audio effects based on location
- Audio occlusion behind obstacles and walls

**Combat Audio Feedback**
- Distinct sounds for different damage types and weapons
- Audio cues for ability cooldowns and resource states
- Status effect audio with clear identification
- Music dynamic adjustment based on combat intensity

## Progression Integration

### Combat Skill Development

**Skill-by-Use Advancement**
- Combat actions provide experience in relevant skills
- Different combat styles advance different skill categories
- Skill level affects combat effectiveness and options
- Mastery unlocks advanced techniques and abilities

**Equipment Integration**
- Weapon requirements based on skill levels
- Stat bonuses from equipment affect combat performance
- Durability system requires equipment maintenance
- Enhancement systems provide long-term progression goals

### Character Specialization

**Role-Based Combat Styles**
- Tank builds focus on damage mitigation and control
- Healer builds emphasize support and restoration
- DPS builds maximize damage output and efficiency
- Hybrid builds balance multiple combat aspects

**Build Diversity**
- Multiple viable approaches within each role
- Equipment and ability choices create distinct playstyles
- Counter-builds and meta considerations for competitive play
- Regular balance updates maintain build variety

## Technical Implementation

### Component Architecture

**Combat Components**
- `CombatStats`: Health, resources, damage modifiers
- `TargetingSystem`: Current target and targeting state
- `AbilitySlots`: Hotbar configuration and cooldown tracking
- `StatusEffects`: Active buffs, debuffs, and durations
- `CombatState`: Current combat phase and engagement status

**System Integration**
- Event-driven damage calculation and application
- Resource system integration with ability costs
- Animation system synchronization with combat timing
- UI system updates for combat information display

### Performance Considerations

**Optimization Strategies**
- Efficient collision detection for area abilities
- Level-of-detail systems for complex visual effects
- Audio pooling for frequent combat sounds
- Network optimization for multiplayer combat synchronization

**Scalability Planning**
- Component-based architecture supports easy expansion
- Modular ability system enables content updates
- Data-driven balance configuration allows rapid iteration
- Performance profiling systems monitor combat system load

## Balance and Tuning

### Balance Philosophy

**Power Level Management**
- Linear power progression prevents exponential scaling
- Horizontal progression provides choice without power inflation
- Regular balance passes maintain competitive viability
- Player feedback integration guides balance decisions

**Counter-Play Systems**
- Every strategy has viable counters
- Rock-paper-scissors relationships prevent dominant strategies
- Skill expression opportunities at all power levels
- Accessibility features don't compromise competitive integrity

### Metrics and Analytics

**Performance Tracking**
- Combat duration and efficiency metrics
- Player retention correlation with combat satisfaction
- Ability usage statistics for balance assessment
- Player skill progression tracking

**Feedback Integration**
- Regular player surveys on combat satisfaction
- Community feedback analysis and response
- Professional playtesting for balance validation
- Data-driven balance adjustments with clear communication

This combat system design creates engaging, skill-based gameplay that maintains player interest through varied encounters, meaningful progression, and tactical depth while supporting the broader MMORPG systems and social gameplay elements central to Eryndor's vision.